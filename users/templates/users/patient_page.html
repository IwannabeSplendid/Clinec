{% extends 'users/layout.html' %}

{% block head %}

<html class="scroll-smooth" x-init="$watch('darkMode', val => localStorage.setItem('dark', val))" x-data="{darkMode: localStorage.dark === 'true' || (!('dark' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches), dialogPanels: []}" :class="darkMode ? '' : ''" lang='en'>

    <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>demo - undefined</title>
      <meta name="description" content="undefined" />
      <link rel="icon" type="image/x-icon" href="https://ik.imagekit.io/n0uvizrukm2/websites/chai-cloud/Vector__2__H9Chm1ngK.svg">
      <meta property="og:title" content="demo - undefined" />
      <meta property="og:image" content="" />
    
      <link id="heading-font" rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700;800;900&display=swap" media="all" />
      <style>
         *,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[multiple],[type=date],[type=datetime-local],[type=email],[type=month],[type=number],[type=password],[type=search],[type=tel],[type=text],[type=time],[type=url],[type=week],select,textarea{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border-color:#6b7280;border-width:1px;border-radius:0;padding-top:.5rem;padding-right:.75rem;padding-bottom:.5rem;padding-left:.75rem;font-size:1rem;line-height:1.5rem;--tw-shadow:0 0 #0000}[multiple]:focus,[type=date]:focus,[type=datetime-local]:focus,[type=email]:focus,[type=month]:focus,[type=number]:focus,[type=password]:focus,[type=search]:focus,[type=tel]:focus,[type=text]:focus,[type=time]:focus,[type=url]:focus,[type=week]:focus,select:focus,textarea:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-inset:var(--tw-empty,/*!*/ /*!*/);--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:#2563eb;--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow);border-color:#2563eb}input::-moz-placeholder,textarea::-moz-placeholder{color:#6b7280;opacity:1}input::placeholder,textarea::placeholder{color:#6b7280;opacity:1}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-date-and-time-value{min-height:1.5em}::-webkit-datetime-edit,::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-meridiem-field,::-webkit-datetime-edit-millisecond-field,::-webkit-datetime-edit-minute-field,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-second-field,::-webkit-datetime-edit-year-field{padding-top:0;padding-bottom:0}select{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right .5rem center;background-repeat:no-repeat;background-size:1.5em 1.5em;padding-right:2.5rem;-webkit-print-color-adjust:exact;color-adjust:exact;print-color-adjust:exact}[multiple]{background-image:initial;background-position:initial;background-repeat:unset;background-size:initial;padding-right:.75rem;-webkit-print-color-adjust:unset;color-adjust:unset;print-color-adjust:unset}[type=checkbox],[type=radio]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;-webkit-print-color-adjust:exact;color-adjust:exact;print-color-adjust:exact;display:inline-block;vertical-align:middle;background-origin:border-box;-webkit-user-select:none;-moz-user-select:none;user-select:none;flex-shrink:0;height:1rem;width:1rem;color:#2563eb;background-color:#fff;border-color:#6b7280;border-width:1px;--tw-shadow:0 0 #0000}[type=checkbox]{border-radius:0}[type=radio]{border-radius:100%}[type=checkbox]:focus,[type=radio]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-inset:var(--tw-empty,/*!*/ /*!*/);--tw-ring-offset-width:2px;--tw-ring-offset-color:#fff;--tw-ring-color:#2563eb;--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}[type=checkbox]:checked,[type=radio]:checked{border-color:transparent;background-color:currentColor;background-size:100% 100%;background-position:center;background-repeat:no-repeat}[type=checkbox]:checked{background-image:url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e")}[type=radio]:checked{background-image:url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3ccircle cx='8' cy='8' r='3'/%3e%3c/svg%3e")}[type=checkbox]:checked:focus,[type=checkbox]:checked:hover,[type=radio]:checked:focus,[type=radio]:checked:hover{border-color:transparent;background-color:currentColor}[type=checkbox]:indeterminate{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 16 16'%3e%3cpath stroke='white' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M4 8h8'/%3e%3c/svg%3e");border-color:transparent;background-color:currentColor;background-size:100% 100%;background-position:center;background-repeat:no-repeat}[type=checkbox]:indeterminate:focus,[type=checkbox]:indeterminate:hover{border-color:transparent;background-color:currentColor}[type=file]{background:unset;border-color:inherit;border-width:0;border-radius:0;padding:0;font-size:unset;line-height:inherit}[type=file]:focus{outline:1px solid ButtonText;outline:1px auto -webkit-focus-ring-color}*,::after,::before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::-webkit-backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.order-last{order:9999}.float-right{float:right}.mx-auto{margin-left:auto;margin-right:auto}.mx-\[20px\]{margin-left:20px;margin-right:20px}.my-\[25px\]{margin-top:25px;margin-bottom:25px}.mx-\[25px\]{margin-left:25px;margin-right:25px}.mr-4{margin-right:1rem}.mb-\[20px\]{margin-bottom:20px}.mb-2{margin-bottom:.5rem}.mb-\[5px\]{margin-bottom:5px}.mt-\[12px\]{margin-top:12px}.mb-\[0px\]{margin-bottom:0}.mb-\[10px\]{margin-bottom:10px}.mb-\[3px\]{margin-bottom:3px}.flex{display:flex}.grid{display:grid}.w-\[500px\]{width:500px}.list-inside{list-style-position:inside}.list-disc{list-style-type:disc}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.content-start{align-content:flex-start}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-start{justify-content:flex-start}.gap-6{gap:1.5rem}.gap-x-3{-moz-column-gap:0.75rem;column-gap:.75rem}.rounded-2xl{border-radius:1rem}.rounded-global{border-radius:5px}.border-t-\[1px\]{border-top-width:1px}.border-solid{border-style:solid}.bg-\[\#FFFFFF\]{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.bg-primary{--tw-bg-opacity:1;background-color:rgb(37 99 235 / var(--tw-bg-opacity))}.bg-teal-500{--tw-bg-opacity:1;background-color:rgb(20 184 166 / var(--tw-bg-opacity))}.px-4{padding-left:1rem;padding-right:1rem}.py-16{padding-top:4rem;padding-bottom:4rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.pt-1{padding-top:.25rem}.pb-8{padding-bottom:2rem}.pr-16{padding-right:4rem}.font-body{font-family:DM Sans,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-\[20px\]{font-size:20px}.font-bold{font-weight:700}.text-\[\#41454c\]{--tw-text-opacity:1;color:rgb(65 69 76 / var(--tw-text-opacity))}.text-primary{--tw-text-opacity:1;color:rgb(37 99 235 / var(--tw-text-opacity))}.text-gray-700{--tw-text-opacity:1;color:rgb(55 65 81 / var(--tw-text-opacity))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity))}.text-black{--tw-text-opacity:1;color:rgb(0 0 0 / var(--tw-text-opacity))}.text-current{color:currentColor}.antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.shadow-xl{--tw-shadow:0 20px 25px -5px rgb(0 0 0 / 0.1),0 8px 10px -6px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color),0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.dark .dark\:bg-\[\#000000\]{--tw-bg-opacity:1;background-color:rgb(0 0 0 / var(--tw-bg-opacity))}.dark .dark\:text-\[\#b3c3d9\]{--tw-text-opacity:1;color:rgb(179 195 217 / var(--tw-text-opacity))}@media (min-width:640px){.sm\:max-w-xl{max-width:36rem}}@media (min-width:768px){.md\:max-w-full{max-width:100%}.md\:px-24{padding-left:6rem;padding-right:6rem}}@media (min-width:1024px){.lg\:max-w-screen-xl{max-width:1280px}.lg\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.lg\:px-8{padding-left:2rem;padding-right:2rem}.lg\:py-20{padding-top:5rem;padding-bottom:5rem}.lg\:py-6{padding-top:1.5rem;padding-bottom:1.5rem}.lg\:pr-16{padding-right:4rem}}@media (min-width:1280px){.xl\:float-right{float:right}.xl\:mx-\[20px\]{margin-left:20px;margin-right:20px}.xl\:my-\[25px\]{margin-top:25px;margin-bottom:25px}.xl\:mx-\[25px\]{margin-left:25px;margin-right:25px}.xl\:mb-\[20px\]{margin-bottom:20px}.xl\:mb-\[5px\]{margin-bottom:5px}.xl\:mt-\[12px\]{margin-top:12px}.xl\:mb-\[0px\]{margin-bottom:0}.xl\:mb-\[10px\]{margin-bottom:10px}.xl\:mb-\[3px\]{margin-bottom:3px}.xl\:flex{display:flex}.xl\:w-\[500px\]{width:500px}.xl\:flex-col{flex-direction:column}.xl\:flex-wrap{flex-wrap:wrap}.xl\:content-start{align-content:flex-start}.xl\:items-start{align-items:flex-start}.xl\:justify-start{justify-content:flex-start}.xl\:rounded-2xl{border-radius:1rem}.xl\:border-t-\[1px\]{border-top-width:1px}.xl\:border-solid{border-style:solid}.xl\:bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.xl\:bg-teal-500{--tw-bg-opacity:1;background-color:rgb(20 184 166 / var(--tw-bg-opacity))}.xl\:pb-\[20px\]{padding-bottom:20px}.xl\:text-\[30px\]{font-size:30px}.xl\:text-\[20px\]{font-size:20px}.xl\:text-black{--tw-text-opacity:1;color:rgb(0 0 0 / var(--tw-text-opacity))}.xl\:text-current{color:currentColor}.xl\:shadow-xl{--tw-shadow:0 20px 25px -5px rgb(0 0 0 / 0.1),0 8px 10px -6px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color),0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}}h1,h1 *,h2,h2 *,h3,h3 *,h4,h4 *,h5,h5 *,h6,h6 *{font-family:"DM Sans",ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}
        #popup-form{
            visibility:hidden;
            position: fixed;
            top:20%;
            left: 40%;
            background-color: cadetblue;
            border-radius: 6px;
        }

        #treatment-history{
            visibility: hidden;
            position: fixed;
            top: 20%;
            left: 20%;
            width: 60%;
            background-color: darkseagreen;
            border-radius: 2%;
            border: 1px solid black;
        }

        #chat_button{
            position: fixed;
            bottom: 5%;
            right: 5%;            

        }

        #chat{
            position: fixed;
            bottom: 8%;
            right: 5%;
            border: 1px solid black;
            border-radius: 5%;

            visibility: hidden;
        }

        .newclass{
            margin-bottom: 30px;
        }
      
      
      </style>
      <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
      <!-- import tailwind-->
        <link href="https://unpkg.com/tailwindcss/dist/tailwind.min.css" rel="stylesheet">
    
    
    </head>
    <title>{{request.user.username} personal page}</title>

    <!--<style>
        #popup-form{
            visibility:hidden;
            position: fixed;
            top:20%;
            left: 40%;
            background-color: cadetblue;
            border-radius: 6px;
        }

        #treatment-history{
            visibility: hidden;
            position: fixed;
            top: 20%;
            left: 20%;
            width: 60%;
            background-color: darkseagreen;
            border-radius: 2%;
            border: 1px solid black;
        }

        #chat_button{
            position: fixed;
            bottom: 5%;
            right: 5%;            

        }

        #chat{
            position: fixed;
            bottom: 8%;
            right: 5%;
            border: 1px solid black;
            border-radius: 5%;

            visibility: hidden;
        }
    </style>-->

{% endblock %}

{%block body%}
  <div class="font-body antialiased text-[#41454c] bg-[#FFFFFF] dark:text-[#b3c3d9] dark:bg-[#000000]">
    <div class="shadow- px-4 py-16 mx-auto sm:max-w-xl md:max-w-full md:px-24 lg:max-w-screen-xl lg:px-8 lg:py-20">
        <div class="grid gap-6 row-gap-10 lg:grid-cols-2">
          <div class="lg:py-6 lg:pr-16">
            <div class="flex">
              <div class="flex flex-col items-center mr-4">
                <div class=""></div>
              </div>
              <div class="w-[500px] border-t-[1px] rounded-2xl border-solid bg-white shadow- shadow-xl mb-[20px] pt-1 pb-8 xl:pb-[20px]">
                <p class="flex justify-start mx-[20px] my-[25px] mb-2 text-lg font-bold text-primary xl:text-[30px] xl:text-black newclass">Personal card</p>
                <p class="text-gray-700">
                <ul class="flex flex-col flex-wrap justify-start content-start items-start mx-[20px] text-[20px] list-disc list-inside">
                  <li class="mb-[5px] flex items-center gap-x-3"><strong>Name:</strong> {{request.user.patient.name}} {{request.user.patient.middle_name}} {{request.user.patient.surname}} </li>
                  <li class="mb-[5px] flex items-center gap-x-3"><strong>ID:</strong> {{request.user.patient.gov_id}}</li>
                  <li class="mb-[5px] flex items-center gap-x-3"><strong>Phone:</strong>548546</li>
                  <li class="mb-[5px] flex items-center gap-x-3"><strong>Email</strong> elinor.dashwood@sensibility.com</li>
                  <li class="flex items-center gap-x-3"><strong>Address:</strong> {{request.user.patient.address}}</li>
                </ul>
                </p><button id="xdAxix" class="float-right mx-[25px] mt-[12px] bg-primary text-white px-4 py-2 rounded-global xl:bg-teal-500" onclick="show_popup()">Edit information</button>
              </div>
            </div>
            <div class="flex">
              <div class="flex flex-col items-center mr-4">
                <div class=""></div>
              </div>
              <div class="w-[500px] border-t-[1px] rounded-2xl border-solid bg-white shadow- shadow-xl pt-1 pb-8 xl:pb-[20px]">
                <p class="flex justify-start mx-[20px] my-[25px] mb-2 text-lg font-bold text-primary xl:text-[30px] xl:text-black newclass">Treatment plan</p>
                {%for treatment in request.user.patient.treatments.all|dictsortreversed:"date"%}
                <p class="text-gray-700">
                    {%if forloop.counter == 1%}
                <ul class="flex flex-col flex-wrap justify-start content-start items-start mx-[20px] text-[20px] list-disc list-inside">
                  
                  <li class="mb-[0px] flex items-center gap-x-3"><strong>Description:</strong></li>
                  <li class="mb-[10px] flex items-center gap-x-3">{{treatment.description}}</li>
                  <li class="mb-[0px] flex items-center gap-x-3"><strong>Medicaments:</strong></li>
                  <li class="mb-[10px] flex items-center gap-x-3">{{treatment.medicaments}}</li>
                  <li class="mb-[0px] flex items-center gap-x-3"><strong>Date:</strong></li>
                  <li class="flex items-center gap-x-3">{{treatment.date}}</li>
                  
                </ul>
                {%endif%}
                {%empty%}
                You have no treatments yet
                {% endfor %}
                </p><button id="scfcvu" class="float-right mx-[25px] mt-[12px] bg-primary text-white px-4 py-2 rounded-global xl:bg-teal-500" onclick="show_treatment_history()">View full history</button>
              </div>
            </div>
          </div>
          <div class="lg:py-6 lg:pr-16">
            <div class="flex">
              <div class="flex flex-col items-center mr-4">
                <div class=""></div>
              </div>
              <div class="w-[500px] border-t-[1px] rounded-2xl border-solid bg-white shadow- shadow-xl mb-[20px] pt-1 pb-8 xl:pb-[20px]">
                <p class="flex justify-start mx-[20px] my-[25px] mb-2 text-lg font-bold text-primary xl:text-[30px] xl:text-black newclass">Appointments</p>
                <p class="text-gray-700">
                <ul class="flex flex-col flex-wrap justify-start content-start items-start mx-[20px] text-[20px] list-disc list-inside">
                  {%for appointment in request.user.patient.appointments.all|dictsortreversed:"date"%}
                  <!--<li class="mb-[5px] flex items-center gap-x-3">Patient: Elinor</li>
                  <li class="mb-[5px] flex items-center gap-x-3">Doctor: House</li>
                  <li class="mb-[5px] flex items-center gap-x-3">Date: 2022-10-21 00:00:00+00:00</li>-->

                  <li class="mb-[5px] flex items-center gap-x-3">{{appointment}}</li>
                  {% empty %}
                  <li class="mb-[5px] flex items-center gap-x-3"><i>There are no appointments yet</i></li>
                  {% endfor %}                    



                </ul>
                </p>
                <form action="{% url 'search_appointment' %}" id="pxboik" class="float-right mx-[25px] mt-[12px] bg-primary text-white px-4 py-2 rounded-global xl:bg-teal-500"><input type="submit" value="Make an appointment"></form>
                <!--<button id="pxboik" class="float-right mx-[25px] mt-[12px] bg-primary text-white px-4 py-2 rounded-global xl:bg-teal-500" action="{% url 'search_appointment' %}" >Make an appointment</button>-->
              </div>
            </div>
            <div class="flex">
              <div class="flex flex-col items-center mr-4">
                <div class=""></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- AlpineJS Library -->
      <script defer src="https://unpkg.com/alpinejs@3.9.0/dist/cdn.min.js"></script>
      <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
      <script>
        AOS.init({
          offset: 50,
          duration: 800
        });
      </script>

    <!-- info of the patient -->
    <!--<div style="border: 1px solid pink">
        <h3>Personal page</h3>

        <p>{{request.user.patient.name}} {{request.user.patient.middle_name}} {{request.user.patient.surname}} </p>
        <p>Government ID: {{request.user.patient.gov_id}}</p>
        <p>Phone number: {{request.user.patient.phone_number}} </p>
        <p>Email: {{request.user.patient.email}} </p>
        <p>Address: {{request.user.patient.address}} </p>

        <button onclick="show_popup()">Edit Info</button>

        <p>{{user.profile}}</p>
    </div>-->
    

    <!-- the most recent treatment of the patient -->
    <!--<div>
        <h3>Treatment plan</h3>
        {%for treatment in request.user.patient.treatments.all|dictsortreversed:"date"%}
            <div style="border: 1px solid red">
                {%if forloop.counter == 1%}
                    <p>Description: {{treatment.description}}</p>
                    <p>Medicaments: {{treatment.medicaments}}</p>
                    <p>Date: {{treatment.date}}</p>
                {%endif%}
            </div>
        {%empty%}
            You have no treatments yet
        {% endfor %}

        <p><button onclick="show_treatment_history()">View Treatment History</button></p>
    </div>

    <hr>-->

    <!-- scheduled (and past) appointments -->
    <!--<div style="border: 1px solid blueviolet">
            <h3>Appointments</h3>
            {% for appointment in user.patient.appointments.all|dictsort:"date" %}
                <p>{{appointment}}</p>
            {% empty %}
                <p><i>There are no appointments yet</i></p>
            {% endfor %}

        <form action="{% url 'search_appointment' %}"><input type="submit" value="Make an appointment"></form>
    </div>-->

        <p><a href="{% url 'logout' %}">log out</a></p>


    <!-- popup to edit personal info -->
    <div id="popup-form">
        please fill out form

        <form action="{% url 'personal' %}" method="post">
            {%csrf_token%}
            <p>Government ID <input type="text" name="gov_id" required {% if request.user.patient.gov_id%} value="{{request.user.patient.gov_id}}" {%endif%}></p>
            <p>Name <input type="text" name="name" required {% if request.user.patient.name%} value="{{request.user.patient.name}}" {%endif%}></p>
            <p>Surname <input type="text" name="surname" required {% if request.user.patient.surname%} value="{{request.user.patient.surname}}" {%endif%}></p>
            <p>Middle name <input type="text" name="middle_name" required {% if request.user.patient.middle_name%} value="{{request.user.patient.middle_name}}" {%endif%}></p>
            <p>Address <input type="text" name="address" required {% if request.user.patient.address%} value="{{request.user.patient.address}}" {%endif%}></p>
            <p>Phone number <input type="text" name="phone_number" required {% if request.user.patient.phone_number%} value="{{request.user.patient.phone_number}}" {%endif%}></p>
            <p>Email <input type="email" name="email" required {% if request.user.patient.email%} value="{{request.user.patient.email}}" {%endif%}></p>
            <p>Contact of a close person <input type="text" name="contact_close" required {% if request.user.patient.contact_close%} value="{{request.user.patient.contact_close}}" {%endif%}></p>

            <p><input type="submit" value="Save"></p>
        </form>
        <button onclick="close_popup()">close</button>
    </div>

    <!-- treatment-history popup -->
    <div id="treatment-history" >
        <h3>Treatment plan</h3>
        {%for treatment in request.user.patient.treatments.all|dictsortreversed:"date"%}
            <div style="border: 1px solid red">
                <p>Description: {{treatment.description}}</p>
                <p>Medicaments: {{treatment.medicaments}}</p>
                <p>Date: {{treatment.date}}</p>
            </div>
        {%empty%}
            You have no treatments yet
        {% endfor %}
        <p><button onclick="close_treatment_history()">Close</button></p>
    </div>


    <!-- chat with the doctor -->
    <div id="chat">
        <i>Chat with {{request.user.patient.assigned_doctor}}</i>
        <!-- div of messages -->
        <div id="chat-messages"></div>

        <!-- form to send message -->
        <form method="post" id="chat-form">
            {%csrf_token%}
            <input type="text" value="" name="message" id="message_text">
            <input type="submit" value="send" id="submit_button">
        </form>
    </div>

    <button id="chat_button" onclick="chat()">Chat with Doctor</button>




<!-- JS ------------------------------------>

    <!-- chat JS -->
    <script>
        let chat_opened = false;

        function chat(){

            if (!chat_opened){
                document.getElementById('chat').style.visibility='visible';
                document.getElementById('chat_button').textContent = 'Close';
                chat_opened = true;
            }
            else{
                document.getElementById('chat').style.visibility='hidden';
                document.getElementById('chat_button').textContent = 'Chat with Doctor';
                chat_opened=false;
            }
        }

        //function using jquery syntax to (constantly check inputs from page? async-ly?)
        $(document).on('submit', '#chat-form', function(e){

            //prevent automatic refreshment when submitting - maybe the reason using ajax here
            e.preventDefault()

            $.ajax({
                type: 'POST',
                url: 'send/{{request.user.patient.chatrooms.first.id}}',
                data:{
                    message_text : $('#message_text').val(),
                    csrfmiddlewaretoken : $('input[name=csrfmiddlewaretoken]').val(),
                },
                success : function(data){
                    console.log(data)
                }
            });

            document.getElementById('message_text').value = '';
        });


        //function to update the div of chat every second (1000 ms)
        $(document).ready(function(){
            setInterval(function(){
                
                $.ajax({
                    type : 'GET',
                    url : 'updateMessages/{{request.user.patient.chatrooms.first.id}}',

                    //take response (contains info of messages in chatroom) and show messages
                    success : function(response){
                        //empty the div
                        $('#chat-messages').empty();

                        //console.log(response.user)

                        for (var key in response.messages){
                            temp = "<hr><p><b>"+response.messages[key].username+"</b></p> <p>"+response.messages[key].message_text+"</p> <p>"+response.messages[key].date+"</p>";
                            $('#chat-messages').append(temp);
                        }
                    }
                })

            }, 1000);
        });

    </script>


    <!-- JS to show and close 'edit-personal-info' and 'see-treatment-history' popupss -->
    <script>
        //popup to edit patient info
        function show_popup(){
            document.getElementById('popup-form').style.visibility="visible";
        }

        function close_popup(){
            document.getElementById('popup-form').style.visibility="hidden";
        }

        //popup to show treatment history
        function show_treatment_history(){
            document.getElementById('treatment-history').style.visibility = "visible";
        }

        function close_treatment_history(){
            document.getElementById('treatment-history').style.visibility = "hidden";
        }

    </script>

  </div>

{% endblock %}